# Send verification code via sms for athentication

##### Send the generated code to the given phone number with any SMS sending service.

✨ This is the main task of this module. ✨

The code generated by faker module is 5 digits. Of course, you can change the number of these figures.

After the code is sent, you must enter it. If the code was correct, you can access the information of controlFlowOfData url.

> Attention: Because there is no handler for unauthenticated users in this version, you must restart the server after an unauthenticated user request.

## Features & Ability

- Ability to change the number of digits of the sent code
- Ability to test and document api with swagger
- Ability to change SMS sending service
- Ability to save given phone number and it's code in redis database
- Ability to save incomming data Redis dataBase (last version)

## Features of generated code

- If the code has been generated once, no more code will be generated.
- The code will expire after 60 seconds.
- If the user uses the code once, he cannot use it again.

## Tech

This module uses a number of open source projects to work properly:

- [Node.js] - evented I/O for the backend
- [Swagger] - Simplifying API development
- [Redis] -  open source, in-memory data structure store, used as a database, cache, and message broker
- [Express] - Fast and low overhead web framework, for Node.js
- [Faker] - Generate massive amounts of fake (but realistic) data for testing and development.
- [Kavenegar] - SMS web service

## Installation guide for the user

```sh
git clone https://github.com/tendal-lox/Send-verification-code-via-sms.git
cd sendCode
npm install
```

## Guide how to use

```sh
npm install Send-verification-code-via-sms
npm start
```

 To start the app in dev mode.\
Open [http://localhost:3000/docs/](http://localhost:3000/docs/) to view it in the browser.

## swagger athentication guide

After receiving the token, you must give it to swagger authorize to set that token in requests header.

> Note: SMS sending service is according to the country of Iran. So you have to adjust it according to your country.
For this, you need to enter /routes/sendVerificationCode.js and change this part of the code:

```javascript
// Kavenegar send api
const api = Kavenegar.KavenegarApi({apikey: 'api key from kavenegar'});
api.Send({ message: generatedCode , sender: "xxx" , receptor: phoneNumber })
```

## Bugs are being fixed

There is no any problem in the production code, but in the first version of this module, there is a problem in the test. Since there is no database in the test file, when you run npm test you will always encounter a database connection problem.

## License

MIT

[node.js]: <http://nodejs.org>
[Swagger]: <https://swagger.io/>
[Redis]: <https://redis.io/>
[Express]: <https://expressjs.com/>
[Faker]: <https://fakerjs.dev/>
[Kavenegar]: <https://kavenegar.com/>